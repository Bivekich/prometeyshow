# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## –ü—Ä–æ–±–ª–µ–º–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

–ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∏–¥–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

## üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ
```bash
npm run check-images
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# .env.production –∏–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞
NODE_ENV=production
DISABLE_SANITY=true
NEXT_PUBLIC_SITE_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.ru
NEXT_PUBLIC_USE_FALLBACK_IMAGES=true
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker)

–í `docker-compose.yml` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```yaml
version: '3.8'
services:
  web:
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      - NODE_ENV=production
      - DISABLE_SANITY=true
      - NEXT_PUBLIC_USE_FALLBACK_IMAGES=true
    ports:
      - '3000:3000'
    volumes:
      - ./public:/app/public  # –í–∞–∂–Ω–æ: –º–æ–Ω—Ç–∏—Ä—É–µ–º –ø–∞–ø–∫—É public
```

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–±—ã—á–Ω—ã–π –¥–µ–ø–ª–æ–π (–±–µ–∑ Docker)

1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä**, –≤–∫–ª—é—á–∞—è –ø–∞–ø–∫—É `public/images/`

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
npm install
```

3. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.production`:**
```bash
NODE_ENV=production
DISABLE_SANITY=true
NEXT_PUBLIC_USE_FALLBACK_IMAGES=true
```

4. **–°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
```bash
npm run build
```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
npm start
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker –¥–µ–ø–ª–æ–π

1. **–û–±–Ω–æ–≤–∏—Ç–µ Dockerfile**, —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
```dockerfile
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –µ—Å—Ç—å –≤ Dockerfile
COPY --from=builder /app/public ./public
```

2. **–û–±–Ω–æ–≤–∏—Ç–µ docker-compose.yml:**
```yaml
version: '3.8'
services:
  web:
    build: .
    environment:
      - NODE_ENV=production
      - DISABLE_SANITY=true
    ports:
      - '3000:3000'
    volumes:
      - ./public/images:/app/public/images  # –ú–æ–Ω—Ç–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

3. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
```bash
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ –≤–∞—à-–¥–æ–º–µ–Ω.ru –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω
curl -I https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/images/fire-show.jpg
curl -I https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/images/pyro-show.jpg
curl -I https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/images/themed-show.jpg
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å `200 OK`.

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
pm2 logs

# –î–ª—è Docker
docker-compose logs -f web
```

–ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å —ç–º–æ–¥–∑–∏ üîç, üì∏, üéØ - —ç—Ç–æ –Ω–∞—à–∏ debug —Å–æ–æ–±—â–µ–Ω–∏—è.

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
–û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12) ‚Üí Network ‚Üí –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.
–í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 200.

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: 404 –æ—à–∏–±–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ `public/images/` —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à:
```bash
# –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
rm -rf .next
npm run build

# –î–ª—è Docker
docker-compose build --no-cache
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
echo $NODE_ENV
echo $DISABLE_SANITY
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Sanity –≤—Å–µ –µ—â–µ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `DISABLE_SANITY=true` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä.

## üìù –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–µ–ø–ª–æ—è

- [ ] –ü–∞–ø–∫–∞ `public/images/` —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `NODE_ENV=production` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DISABLE_SANITY=true` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω –∫–æ–º–∞–Ω–¥–æ–π `npm run build`
- [ ] –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø—Ä—è–º—ã–º —Å—Å—ã–ª–∫–∞–º
- [ ] –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã debug —Å–æ–æ–±—â–µ–Ω–∏—è —Å —ç–º–æ–¥–∑–∏
- [ ] –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º:**
```bash
chmod -R 755 public/images/
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ñ–∞–π–ª–æ–≤:**
```bash
chown -R www-data:www-data public/images/
```

3. **–í–∫–ª—é—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
–î–æ–±–∞–≤—å—Ç–µ –≤ `.env.production`:
```bash
DEBUG=true
NEXT_DEBUG=true
```

4. **–°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–∞** - –≤–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:
- –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–º–∞–Ω–¥—ã `npm run check-images`
- –°–∫—Ä–∏–Ω—à–æ—Ç Network tab –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–∞ (nginx, apache –∏ —Ç.–¥.) 